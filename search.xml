<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[èŠèŠHTTP1.xå’ŒHTTP2.0]]></title>
    <url>%2Farticles%2F%E8%81%8A%E8%81%8AHTTP1-x%E5%92%8CHTTP2-0%2F</url>
    <content type="text"><![CDATA[ä¸€ã€HTTP 1.xHTTPåè®®ï¼ˆHyperTextTransferProtocolï¼Œè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼‰æ˜¯ç”¨äºŽä»ŽWWWæœåŠ¡å™¨ä¼ è¾“è¶…æ–‡æœ¬åˆ°æœ¬åœ°æµè§ˆå™¨çš„ä¼ è¾“åè®®ã€‚ 1. HTTPå‘å±•å²ï¼š 2. HTTPçš„åŸºæœ¬ä¼˜åŒ–å½±å“ä¸€ä¸ª HTTP ç½‘ç»œè¯·æ±‚çš„å› ç´ ä¸»è¦æœ‰ä¸¤ä¸ªï¼šå¸¦å®½å’Œå»¶è¿Ÿã€‚ å¸¦å®½ï¼šå¦‚æžœè¯´æˆ‘ä»¬è¿˜åœç•™åœ¨æ‹¨å·ä¸Šç½‘çš„é˜¶æ®µï¼Œå¸¦å®½å¯èƒ½ä¼šæˆä¸ºä¸€ä¸ªæ¯”è¾ƒä¸¥é‡å½±å“è¯·æ±‚çš„é—®é¢˜ï¼Œä½†æ˜¯çŽ°åœ¨ç½‘ç»œåŸºç¡€å»ºè®¾å·²ç»ä½¿å¾—å¸¦å®½å¾—åˆ°æžå¤§çš„æå‡ï¼Œæˆ‘ä»¬ä¸å†ä¼šæ‹…å¿ƒç”±å¸¦å®½è€Œå½±å“ç½‘é€Ÿï¼Œé‚£ä¹ˆå°±åªå‰©ä¸‹å»¶è¿Ÿäº†ã€‚ å»¶è¿Ÿï¼š æµè§ˆå™¨é˜»å¡žï¼ˆHOL blockingï¼‰ï¼šæµè§ˆå™¨ä¼šå› ä¸ºä¸€äº›åŽŸå› é˜»å¡žè¯·æ±‚ã€‚æµè§ˆå™¨å¯¹äºŽåŒä¸€ä¸ªåŸŸåï¼ŒåŒæ—¶åªèƒ½æœ‰ 4 ä¸ªè¿žæŽ¥ï¼ˆè¿™ä¸ªæ ¹æ®æµè§ˆå™¨å†…æ ¸ä¸åŒå¯èƒ½ä¼šæœ‰æ‰€å·®å¼‚ï¼‰ï¼Œè¶…è¿‡æµè§ˆå™¨æœ€å¤§è¿žæŽ¥æ•°é™åˆ¶ï¼ŒåŽç»­è¯·æ±‚å°±ä¼šè¢«é˜»å¡žã€‚ DNS æŸ¥è¯¢ï¼ˆDNS Lookupï¼‰ï¼šæµè§ˆå™¨éœ€è¦çŸ¥é“ç›®æ ‡æœåŠ¡å™¨çš„ IP æ‰èƒ½å»ºç«‹è¿žæŽ¥ã€‚å°†åŸŸåè§£æžä¸º IP çš„è¿™ä¸ªç³»ç»Ÿå°±æ˜¯ DNSã€‚è¿™ä¸ªé€šå¸¸å¯ä»¥åˆ©ç”¨DNSç¼“å­˜ç»“æžœæ¥è¾¾åˆ°å‡å°‘è¿™ä¸ªæ—¶é—´çš„ç›®çš„ã€‚** å»ºç«‹è¿žæŽ¥ï¼ˆInitial connectionï¼‰ï¼šHTTP æ˜¯åŸºäºŽ TCP åè®®çš„ï¼Œæµè§ˆå™¨æœ€å¿«ä¹Ÿè¦åœ¨ç¬¬ä¸‰æ¬¡æ¡æ‰‹æ—¶æ‰èƒ½æŽå¸¦ HTTP è¯·æ±‚æŠ¥æ–‡ï¼Œè¾¾åˆ°çœŸæ­£çš„å»ºç«‹è¿žæŽ¥ï¼Œä½†æ˜¯è¿™äº›è¿žæŽ¥æ— æ³•å¤ç”¨ä¼šå¯¼è‡´æ¯æ¬¡è¯·æ±‚éƒ½ç»åŽ†ä¸‰æ¬¡æ¡æ‰‹å’Œæ…¢å¯åŠ¨ã€‚ä¸‰æ¬¡æ¡æ‰‹åœ¨é«˜å»¶è¿Ÿçš„åœºæ™¯ä¸‹å½±å“è¾ƒæ˜Žæ˜¾ï¼Œæ…¢å¯åŠ¨åˆ™å¯¹æ–‡ä»¶ç±»å¤§è¯·æ±‚å½±å“è¾ƒå¤§ã€‚ HTTP æ€§èƒ½ä¼˜åŒ–çš„å…³é”®å¹¶ä¸åœ¨äºŽé«˜å¸¦å®½ï¼Œè€Œæ˜¯ä½Žå»¶è¿Ÿ 3. HTTP1.0å’ŒHTTP1.1çš„ä¸€äº›åŒºåˆ«HTTP1.0æœ€æ—©åœ¨ç½‘é¡µä¸­ä½¿ç”¨æ˜¯åœ¨1996å¹´ï¼Œé‚£ä¸ªæ—¶å€™åªæ˜¯ä½¿ç”¨ä¸€äº›è¾ƒä¸ºç®€å•çš„ç½‘é¡µä¸Šå’Œç½‘ç»œè¯·æ±‚ä¸Šï¼Œè€ŒHTTP1.1åˆ™åœ¨1999å¹´æ‰å¼€å§‹å¹¿æ³›åº”ç”¨äºŽçŽ°åœ¨çš„å„å¤§æµè§ˆå™¨ç½‘ç»œè¯·æ±‚ä¸­ï¼ŒåŒæ—¶HTTP1.1ä¹Ÿæ˜¯å½“å‰ä½¿ç”¨æœ€ä¸ºå¹¿æ³›çš„HTTPåè®®ã€‚ ä¸»è¦åŒºåˆ«ä¸»è¦ä½“çŽ°åœ¨ï¼š ç¼“å­˜å¤„ç† åœ¨HTTP1.0ä¸­ä¸»è¦ä½¿ç”¨headeré‡Œçš„If-Modified-Sinceï¼ŒExpiresæ¥åšä¸ºç¼“å­˜åˆ¤æ–­çš„æ ‡å‡†ï¼ŒHTTP1.1åˆ™å¼•å…¥äº†æ›´å¤šçš„ç¼“å­˜æŽ§åˆ¶ç­–ç•¥ä¾‹å¦‚Entity tagï¼ŒIf-Unmodified-Sinceï¼Œ If-Matchï¼Œ If-None-Matchç­‰æ›´å¤šå¯ä¾›é€‰æ‹©çš„ç¼“å­˜å¤´æ¥æŽ§åˆ¶ç¼“å­˜ç­–ç•¥ã€‚ æä¾›äº†æ›´å¤šå¯ä¾›é€‰æ‹©çš„ç¼“å­˜å¤´æ¥æŽ§åˆ¶ç¼“å­˜ç­–ç•¥ å¸¦å®½ä¼˜åŒ–åŠç½‘ç»œè¿žæŽ¥çš„ä½¿ç”¨ HTTP1.0ä¸­ï¼Œå­˜åœ¨ä¸€äº›æµªè´¹å¸¦å®½çš„çŽ°è±¡ï¼Œä¾‹å¦‚å®¢æˆ·ç«¯åªæ˜¯éœ€è¦æŸä¸ªå¯¹è±¡çš„ä¸€éƒ¨åˆ†ï¼Œè€ŒæœåŠ¡å™¨å´å°†æ•´ä¸ªå¯¹è±¡é€è¿‡æ¥äº†ï¼Œå¹¶ä¸”ä¸æ”¯æŒæ–­ç‚¹ç»­ä¼ åŠŸèƒ½ï¼ŒHTTP1.1åˆ™åœ¨è¯·æ±‚å¤´å¼•å…¥äº†rangeå¤´åŸŸï¼Œå®ƒå…è®¸åªè¯·æ±‚èµ„æºçš„æŸä¸ªéƒ¨åˆ†ï¼Œå³è¿”å›žç æ˜¯206ï¼ˆPartial Contentï¼‰ï¼Œè¿™æ ·å°±æ–¹ä¾¿äº†å¼€å‘è€…è‡ªç”±çš„é€‰æ‹©ä»¥ä¾¿äºŽå……åˆ†åˆ©ç”¨å¸¦å®½å’Œè¿žæŽ¥ã€‚ æ”¯æŒæ–­ç‚¹ç»­ä¼  é”™è¯¯é€šçŸ¥çš„ç®¡ç† åœ¨HTTP1.1ä¸­æ–°å¢žäº†24ä¸ªé”™è¯¯çŠ¶æ€å“åº”ç ï¼Œå¦‚409ï¼ˆConflictï¼‰è¡¨ç¤ºè¯·æ±‚çš„èµ„æºä¸Žèµ„æºçš„å½“å‰çŠ¶æ€å‘ç”Ÿå†²çªï¼›410ï¼ˆGoneï¼‰è¡¨ç¤ºæœåŠ¡å™¨ä¸Šçš„æŸä¸ªèµ„æºè¢«æ°¸ä¹…æ€§çš„åˆ é™¤ã€‚ æä¾›äº†æ›´å¤šçš„é”™è¯¯çŠ¶æ€å“åº”ç  Hostå¤´å¤„ç† åœ¨HTTP1.0ä¸­è®¤ä¸ºæ¯å°æœåŠ¡å™¨éƒ½ç»‘å®šä¸€ä¸ªå”¯ä¸€çš„IPåœ°å€ï¼Œå› æ­¤ï¼Œè¯·æ±‚æ¶ˆæ¯ä¸­çš„URLå¹¶æ²¡æœ‰ä¼ é€’ä¸»æœºåï¼ˆhostnameï¼‰ã€‚ä½†éšç€è™šæ‹Ÿä¸»æœºæŠ€æœ¯çš„å‘å±•ï¼Œåœ¨ä¸€å°ç‰©ç†æœåŠ¡å™¨ä¸Šå¯ä»¥å­˜åœ¨å¤šä¸ªè™šæ‹Ÿä¸»æœºï¼ˆMulti-homed Web Serversï¼‰ï¼Œå¹¶ä¸”å®ƒä»¬å…±äº«ä¸€ä¸ªIPåœ°å€ã€‚HTTP1.1çš„è¯·æ±‚æ¶ˆæ¯å’Œå“åº”æ¶ˆæ¯éƒ½åº”æ”¯æŒHostå¤´åŸŸï¼Œä¸”è¯·æ±‚æ¶ˆæ¯ä¸­å¦‚æžœæ²¡æœ‰Hostå¤´åŸŸä¼šæŠ¥å‘Šä¸€ä¸ªé”™è¯¯ï¼ˆ400 Bad Requestï¼‰ã€‚ hoståŸŸ é•¿è¿žæŽ¥ HTTP 1.1æ”¯æŒé•¿è¿žæŽ¥ï¼ˆPersistentConnectionï¼‰å’Œè¯·æ±‚çš„æµæ°´çº¿ï¼ˆPipeliningï¼‰å¤„ç†ï¼Œåœ¨ä¸€ä¸ªTCPè¿žæŽ¥ä¸Šå¯ä»¥ä¼ é€å¤šä¸ªHTTPè¯·æ±‚å’Œå“åº”ï¼Œå‡å°‘äº†å»ºç«‹å’Œå…³é—­è¿žæŽ¥çš„æ¶ˆè€—å’Œå»¶è¿Ÿï¼Œåœ¨HTTP1.1ä¸­é»˜è®¤å¼€å¯Connectionï¼š keep-aliveï¼Œä¸€å®šç¨‹åº¦ä¸Šå¼¥è¡¥äº†HTTP1.0æ¯æ¬¡è¯·æ±‚éƒ½è¦åˆ›å»ºè¿žæŽ¥çš„ç¼ºç‚¹ã€‚ æ”¯æŒé•¿è¿žæŽ¥å’Œpipelining 4. HTTPSä¸ŽHTTPçš„ä¸€äº›åŒºåˆ« HTTPSåè®®éœ€è¦åˆ°CAç”³è¯·è¯ä¹¦ï¼Œä¸€èˆ¬å…è´¹è¯ä¹¦å¾ˆå°‘ï¼Œéœ€è¦äº¤è´¹ã€‚ HTTPåè®®è¿è¡Œåœ¨TCPä¹‹ä¸Šï¼Œæ‰€æœ‰ä¼ è¾“çš„å†…å®¹éƒ½æ˜¯æ˜Žæ–‡ï¼ŒHTTPSè¿è¡Œåœ¨SSL/TLSä¹‹ä¸Šï¼ŒSSL/TLSè¿è¡Œåœ¨TCPä¹‹ä¸Šï¼Œæ‰€æœ‰ä¼ è¾“çš„å†…å®¹éƒ½ç»è¿‡åŠ å¯†çš„ã€‚ HTTPå’ŒHTTPSä½¿ç”¨çš„æ˜¯å®Œå…¨ä¸åŒçš„è¿žæŽ¥æ–¹å¼ï¼Œç”¨çš„ç«¯å£ä¹Ÿä¸ä¸€æ ·ï¼Œå‰è€…æ˜¯80ï¼ŒåŽè€…æ˜¯443ã€‚ HTTPSå¯ä»¥æœ‰æ•ˆçš„é˜²æ­¢è¿è¥å•†åŠ«æŒï¼Œè§£å†³äº†é˜²åŠ«æŒçš„ä¸€ä¸ªå¤§é—®é¢˜ã€‚ äºŒã€SPDYï¼šGoogleæå‡ºçš„HTTP1.xä¼˜åŒ–æ–¹æ¡ˆ2012å¹´googleå¦‚ä¸€å£°æƒŠé›·æå‡ºäº†SPDYçš„æ–¹æ¡ˆï¼Œä¼˜åŒ–äº†HTTP1.Xçš„è¯·æ±‚å»¶è¿Ÿï¼Œè§£å†³äº†HTTP1.Xçš„å®‰å…¨æ€§ï¼Œå…·ä½“å¦‚ä¸‹ï¼š é™ä½Žå»¶è¿Ÿ é’ˆå¯¹HTTPé«˜å»¶è¿Ÿçš„é—®é¢˜ï¼ŒSPDYä¼˜é›…çš„é‡‡å–äº†å¤šè·¯å¤ç”¨ï¼ˆmultiplexingï¼‰ã€‚å¤šè·¯å¤ç”¨é€šè¿‡å¤šä¸ªè¯·æ±‚streamå…±äº«ä¸€ä¸ªtcpè¿žæŽ¥çš„æ–¹å¼ï¼Œè§£å†³äº†HOL blockingçš„é—®é¢˜ï¼Œé™ä½Žäº†å»¶è¿ŸåŒæ—¶æé«˜äº†å¸¦å®½çš„åˆ©ç”¨çŽ‡ã€‚ è¯·æ±‚ä¼˜å…ˆçº§ï¼ˆrequest prioritizationï¼‰ å¤šè·¯å¤ç”¨å¸¦æ¥ä¸€ä¸ªæ–°çš„é—®é¢˜æ˜¯ï¼Œåœ¨è¿žæŽ¥å…±äº«çš„åŸºç¡€ä¹‹ä¸Šæœ‰å¯èƒ½ä¼šå¯¼è‡´å…³é”®è¯·æ±‚è¢«é˜»å¡žã€‚SPDYå…è®¸ç»™æ¯ä¸ªrequestè®¾ç½®ä¼˜å…ˆçº§ï¼Œè¿™æ ·é‡è¦çš„è¯·æ±‚å°±ä¼šä¼˜å…ˆå¾—åˆ°å“åº”ã€‚æ¯”å¦‚æµè§ˆå™¨åŠ è½½é¦–é¡µï¼Œé¦–é¡µçš„htmlå†…å®¹åº”è¯¥ä¼˜å…ˆå±•ç¤ºï¼Œä¹‹åŽæ‰æ˜¯å„ç§é™æ€èµ„æºæ–‡ä»¶ï¼Œè„šæœ¬æ–‡ä»¶ç­‰åŠ è½½ï¼Œè¿™æ ·å¯ä»¥ä¿è¯ç”¨æˆ·èƒ½ç¬¬ä¸€æ—¶é—´çœ‹åˆ°ç½‘é¡µå†…å®¹ã€‚ headeråŽ‹ç¼©ã€‚ å‰é¢æåˆ°HTTP1.xçš„headerå¾ˆå¤šæ—¶å€™éƒ½æ˜¯é‡å¤å¤šä½™çš„ã€‚é€‰æ‹©åˆé€‚çš„åŽ‹ç¼©ç®—æ³•å¯ä»¥å‡å°åŒ…çš„å¤§å°å’Œæ•°é‡ã€‚ åŸºäºŽHTTPSçš„åŠ å¯†åè®®ä¼ è¾“ å¤§å¤§æé«˜äº†ä¼ è¾“æ•°æ®çš„å¯é æ€§ã€‚ æœåŠ¡ç«¯æŽ¨é€ï¼ˆserver pushï¼‰ é‡‡ç”¨äº†SPDYçš„ç½‘é¡µï¼Œä¾‹å¦‚æˆ‘çš„ç½‘é¡µæœ‰ä¸€ä¸ªsytle.cssçš„è¯·æ±‚ï¼Œåœ¨å®¢æˆ·ç«¯æ”¶åˆ°sytle.cssæ•°æ®çš„åŒæ—¶ï¼ŒæœåŠ¡ç«¯ä¼šå°†sytle.jsçš„æ–‡ä»¶æŽ¨é€ç»™å®¢æˆ·ç«¯ï¼Œå½“å®¢æˆ·ç«¯å†æ¬¡å°è¯•èŽ·å–sytle.jsæ—¶å°±å¯ä»¥ç›´æŽ¥ä»Žç¼“å­˜ä¸­èŽ·å–åˆ°ï¼Œä¸ç”¨å†å‘è¯·æ±‚äº†ã€‚SPDYæž„æˆå›¾ï¼š SPDYä½äºŽHTTPä¹‹ä¸‹ï¼ŒTCPå’ŒSSLä¹‹ä¸Šï¼Œè¿™æ ·å¯ä»¥è½»æ¾å…¼å®¹è€ç‰ˆæœ¬çš„HTTPåè®®(å°†HTTP1.xçš„å†…å®¹å°è£…æˆä¸€ç§æ–°çš„frameæ ¼å¼)ï¼ŒåŒæ—¶å¯ä»¥ä½¿ç”¨å·²æœ‰çš„SSLåŠŸèƒ½ã€‚ ä¸‰ã€HTTP 2.0æ¨ªç©ºå‡ºä¸–1. æ€§èƒ½æƒŠäººHTTP 2.0 çš„å‡ºçŽ°ï¼Œç›¸æ¯”äºŽ HTTP 1.x ï¼Œå¤§å¹…åº¦çš„æå‡äº† web æ€§èƒ½ã€‚ è¿™æ˜¯ Akamai å…¬å¸å»ºç«‹çš„ä¸€ä¸ªå®˜æ–¹çš„æ¼”ç¤ºï¼Œç”¨ä»¥è¯´æ˜Ž HTTP/2 ç›¸æ¯”äºŽä¹‹å‰çš„ HTTP/1.1 åœ¨æ€§èƒ½ä¸Šçš„å¤§å¹…åº¦æå‡ã€‚ åŒæ—¶è¯·æ±‚ 379 å¼ å›¾ç‰‡ï¼Œä»ŽLoad time çš„å¯¹æ¯”å¯ä»¥çœ‹å‡º HTTP/2 åœ¨é€Ÿåº¦ä¸Šçš„ä¼˜åŠ¿ã€‚ 2. HTTP2.0ï¼šSPDYçš„å‡çº§ç‰ˆHTTP2.0å¯ä»¥è¯´æ˜¯SPDYçš„å‡çº§ç‰ˆï¼ˆå…¶å®žåŽŸæœ¬ä¹Ÿæ˜¯åŸºäºŽSPDYè®¾è®¡çš„ï¼‰ï¼Œä½†æ˜¯ï¼ŒHTTP2.0 è·Ÿ SPDY ä»æœ‰ä¸åŒçš„åœ°æ–¹ï¼Œå¦‚ä¸‹ï¼š HTTP2.0 æ”¯æŒæ˜Žæ–‡ HTTP ä¼ è¾“ï¼Œè€Œ SPDY å¼ºåˆ¶ä½¿ç”¨ HTTPSã€‚ HTTP2.0 æ¶ˆæ¯å¤´çš„åŽ‹ç¼©ç®—æ³•é‡‡ç”¨ HPACKï¼Œè€Œéž SPDY é‡‡ç”¨çš„ DEFLATEã€‚ å››ã€HTTP 2.0 å’Œ HTTP1.1 åŒºåˆ«åŽé¢æˆ‘ä»¬å°†é€šè¿‡å‡ ä¸ªæ–¹é¢æ¥è¯´è¯´HTTP 2.0 å’Œ HTTP1.1 åŒºåˆ«ï¼Œå¹¶ä¸”å’Œä½ è§£é‡Šä¸‹å…¶ä¸­çš„åŽŸç†ã€‚ åŒºåˆ«ä¸€ï¼šå¤šè·¯å¤ç”¨ TCP è¿žæŽ¥ä¼šéšç€æ—¶é—´è¿›è¡Œè‡ªæˆ‘ã€Œè°ƒè°ã€ï¼Œèµ·åˆä¼šé™åˆ¶è¿žæŽ¥çš„æœ€å¤§é€Ÿåº¦ï¼Œå¦‚æžœæ•°æ®æˆåŠŸä¼ è¾“ï¼Œä¼šéšç€æ—¶é—´çš„æŽ¨ç§»æé«˜ä¼ è¾“çš„é€Ÿåº¦ã€‚è¿™ç§è°ƒè°åˆ™è¢«ç§°ä¸º TCP æ…¢å¯åŠ¨ã€‚ç”±äºŽè¿™ç§åŽŸå› ï¼Œè®©åŽŸæœ¬å°±å…·æœ‰çªå‘æ€§å’ŒçŸ­æ—¶æ€§çš„ HTTP è¿žæŽ¥å˜çš„ååˆ†ä½Žæ•ˆã€‚ HTTP/2 é€šè¿‡è®©æ‰€æœ‰æ•°æ®æµå…±ç”¨åŒä¸€ä¸ªè¿žæŽ¥ï¼Œå¯ä»¥æ›´æœ‰æ•ˆåœ°ä½¿ç”¨ TCP è¿žæŽ¥ï¼Œè®©é«˜å¸¦å®½ä¹Ÿèƒ½çœŸæ­£çš„æœåŠ¡äºŽ HTTP çš„æ€§èƒ½æå‡ã€‚ å¤šè·¯å¤ç”¨å…è®¸å•ä¸€çš„ HTTP/2 è¿žæŽ¥åŒæ—¶å‘èµ·å¤šé‡çš„è¯·æ±‚-å“åº”æ¶ˆæ¯ã€‚çœ‹ä¸ªä¾‹å­ï¼š æ•´ä¸ªè®¿é—®æµç¨‹ç¬¬ä¸€æ¬¡è¯·æ±‚index.htmlé¡µé¢ï¼Œä¹‹åŽæµè§ˆå™¨ä¼šåŽ»è¯·æ±‚style.csså’Œscripts.jsçš„æ–‡ä»¶ã€‚å·¦è¾¹çš„å›¾æ˜¯é¡ºåºåŠ è½½ä¸¤ä¸ªä¸ªæ–‡ä»¶çš„ï¼Œå³è¾¹åˆ™æ˜¯å¹¶è¡ŒåŠ è½½ä¸¤ä¸ªæ–‡ä»¶ã€‚ é€šè¿‡ä¸‹é¢ä¸¤å¼ å›¾ï¼Œæˆ‘ä»¬å¯ä»¥æ›´åŠ æ·±å…¥çš„è®¤è¯†å¤šè·¯å¤ç”¨ï¼š HTTP 1.xï¼š HTTP 2ï¼š æ€»ç»“ä¸‹ï¼š å¤šè·¯å¤ç”¨æŠ€æœ¯ï¼šå•è¿žæŽ¥å¤šèµ„æºçš„æ–¹å¼ï¼Œå‡å°‘æœåŠ¡ç«¯çš„é“¾æŽ¥åŽ‹åŠ›ï¼Œå†…å­˜å ç”¨æ›´å°‘ï¼Œè¿žæŽ¥åžåé‡æ›´å¤§ï¼›ç”±äºŽå‡å°‘TCP æ…¢å¯åŠ¨æ—¶é—´ï¼Œæé«˜ä¼ è¾“çš„é€Ÿåº¦ã€‚ åŒºåˆ«äºŒï¼šäºŒè¿›åˆ¶åˆ†å¸§ TCPè¿žæŽ¥ç›¸å½“äºŽä¸¤æ ¹ç®¡é“ï¼ˆä¸€ä¸ªç”¨äºŽæœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯ï¼Œä¸€ä¸ªç”¨äºŽå®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨ï¼‰ï¼Œç®¡é“é‡Œé¢æ•°æ®ä¼ è¾“æ˜¯é€šè¿‡å­—èŠ‚ç ä¼ è¾“ï¼Œä¼ è¾“æ˜¯æœ‰åºçš„ï¼Œæ¯ä¸ªå­—èŠ‚éƒ½æ˜¯ä¸€ä¸ªä¸€ä¸ªæ¥ä¼ è¾“ã€‚ æˆ‘ä»¬çŸ¥é“HTTPåº•å±‚å…¶å®žä¾èµ–çš„æ˜¯TCPåè®®ï¼Œé‚£é—®é¢˜æ˜¯åœ¨åŒä¸€ä¸ªè¿žæŽ¥é‡Œé¢åŒæ—¶å‘ç”Ÿä¸¤ä¸ªè¯·æ±‚å“åº”ç€æ˜¯æ€Žä¹ˆåšåˆ°çš„ï¼Ÿ é¦–å…ˆä½ è¦çŸ¥é“ï¼ŒTCPè¿žæŽ¥ç›¸å½“äºŽä¸¤æ ¹ç®¡é“ï¼ˆä¸€ä¸ªç”¨äºŽæœåŠ¡å™¨åˆ°å®¢æˆ·ç«¯ï¼Œä¸€ä¸ªç”¨äºŽå®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨ï¼‰ï¼Œç®¡é“é‡Œé¢æ•°æ®ä¼ è¾“æ˜¯é€šè¿‡å­—èŠ‚ç ä¼ è¾“ï¼Œä¼ è¾“æ˜¯æœ‰åºçš„ï¼Œæ¯ä¸ªå­—èŠ‚éƒ½æ˜¯ä¸€ä¸ªä¸€ä¸ªæ¥ä¼ è¾“ã€‚ ä¾‹å¦‚å®¢æˆ·ç«¯è¦å‘æœåŠ¡å™¨å‘é€Helloã€Worldä¸¤ä¸ªå•è¯ï¼Œåªèƒ½æ˜¯å…ˆå‘é€Helloå†å‘é€Worldï¼Œæ²¡åŠžæ³•åŒæ—¶å‘é€è¿™ä¸¤ä¸ªå•è¯ã€‚ä¸ç„¶æœåŠ¡å™¨æ”¶åˆ°çš„å¯èƒ½å°±æ˜¯HWeolrllodï¼ˆæ³¨æ„æ˜¯ç©¿æ’ç€å‘è¿‡åŽ»äº†ï¼Œä½†æ˜¯é¡ºåºè¿˜æ˜¯ä¸ä¼šä¹±ï¼‰ã€‚è¿™æ ·æœåŠ¡å™¨å°±æ‡µbäº†ã€‚ æŽ¥ä¸Šé¢çš„é—®é¢˜ï¼Œèƒ½å¦åŒæ—¶å‘é€Helloå’ŒWorldä¸¤ä¸ªå•è¯èƒ½ï¼Œå½“ç„¶ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå¯ä»¥å°†æ•°æ®æ‹†æˆåŒ…ï¼Œç»™æ¯ä¸ªåŒ…æ‰“ä¸Šæ ‡ç­¾ã€‚å‘çš„æ—¶å€™æ˜¯è¿™æ ·çš„â‘ H â‘¡W â‘ e â‘¡o â‘ l â‘¡r â‘ l â‘¡l â‘ o â‘¡dã€‚è¿™æ ·åˆ°äº†æœåŠ¡å™¨ï¼ŒæœåŠ¡å™¨æ ¹æ®æ ‡ç­¾æŠŠä¸¤ä¸ªå•è¯åŒºåˆ†å¼€æ¥ã€‚å®žé™…çš„å‘é€æ•ˆæžœå¦‚ä¸‹å›¾ï¼š è¦å®žçŽ°ä¸Šé¢çš„æ•ˆæžœæˆ‘ä»¬å¼•å…¥ä¸€ä¸ªæ–°çš„æ¦‚å¿µå°±æ˜¯ï¼šäºŒè¿›åˆ¶åˆ†å¸§ã€‚ äºŒè¿›åˆ¶åˆ†å¸§å±‚ åœ¨ åº”ç”¨å±‚(HTTP/2)å’Œä¼ è¾“å±‚(TCP or UDP)ä¹‹é—´ã€‚HTTP/2å¹¶æ²¡æœ‰åŽ»ä¿®æ”¹TCPåè®®è€Œæ˜¯å°½å¯èƒ½çš„åˆ©ç”¨TCPçš„ç‰¹æ€§ã€‚ åœ¨äºŒè¿›åˆ¶åˆ†å¸§å±‚ä¸­ï¼Œ HTTP/2 ä¼šå°†æ‰€æœ‰ä¼ è¾“çš„ä¿¡æ¯åˆ†å‰²ä¸ºå¸§ï¼ˆframeï¼‰ï¼Œå¹¶å¯¹å®ƒä»¬é‡‡ç”¨äºŒè¿›åˆ¶æ ¼å¼çš„ç¼–ç  ï¼Œå…¶ä¸­ é¦–éƒ¨ä¿¡æ¯ä¼šè¢«å°è£…åˆ° HEADER frameï¼Œè€Œç›¸åº”çš„ Request Body åˆ™å°è£…åˆ° DATA frame é‡Œé¢ã€‚ åŒºåˆ«ä¸‰ï¼šé¦–éƒ¨åŽ‹ç¼©ä¸ºä»€ä¹ˆè¦åŽ‹ç¼©ï¼Ÿåœ¨ HTTP/1 ä¸­ï¼ŒHTTP è¯·æ±‚å’Œå“åº”éƒ½æ˜¯ç”±ã€ŒçŠ¶æ€è¡Œã€è¯·æ±‚ / å“åº”å¤´éƒ¨ã€æ¶ˆæ¯ä¸»ä½“ã€ä¸‰éƒ¨åˆ†ç»„æˆã€‚ä¸€èˆ¬è€Œè¨€ï¼Œæ¶ˆæ¯ä¸»ä½“éƒ½ä¼šç»è¿‡ gzip åŽ‹ç¼©ï¼Œæˆ–è€…æœ¬èº«ä¼ è¾“çš„å°±æ˜¯åŽ‹ç¼©è¿‡åŽçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆä¾‹å¦‚å›¾ç‰‡ã€éŸ³é¢‘ï¼‰ï¼Œä½†çŠ¶æ€è¡Œå’Œå¤´éƒ¨å´æ²¡æœ‰ç»è¿‡ä»»ä½•åŽ‹ç¼©ï¼Œç›´æŽ¥ä»¥çº¯æ–‡æœ¬ä¼ è¾“ã€‚ éšç€ Web åŠŸèƒ½è¶Šæ¥è¶Šå¤æ‚ï¼Œæ¯ä¸ªé¡µé¢äº§ç”Ÿçš„è¯·æ±‚æ•°ä¹Ÿè¶Šæ¥è¶Šå¤šï¼Œå¯¼è‡´æ¶ˆè€—åœ¨å¤´éƒ¨çš„æµé‡è¶Šæ¥è¶Šå¤šï¼Œå°¤å…¶æ˜¯æ¯æ¬¡éƒ½è¦ä¼ è¾“ UserAgentã€Cookie è¿™ç±»ä¸ä¼šé¢‘ç¹å˜åŠ¨çš„å†…å®¹ï¼Œå®Œå…¨æ˜¯ä¸€ç§æµªè´¹ã€‚ æˆ‘ä»¬å†ç”¨é€šä¿—çš„è¯­è¨€è§£é‡Šä¸‹ï¼ŒåŽ‹ç¼©çš„åŽŸç†ã€‚å¤´éƒ¨åŽ‹ç¼©éœ€è¦åœ¨æ”¯æŒ HTTP/2 çš„æµè§ˆå™¨å’ŒæœåŠ¡ç«¯ä¹‹é—´: ç»´æŠ¤ä¸€ä»½ç›¸åŒçš„é™æ€å­—å…¸ï¼ˆStatic Tableï¼‰ï¼ŒåŒ…å«å¸¸è§çš„å¤´éƒ¨åç§°ï¼Œä»¥åŠç‰¹åˆ«å¸¸è§çš„å¤´éƒ¨åç§°ä¸Žå€¼çš„ç»„åˆï¼› ç»´æŠ¤ä¸€ä»½ç›¸åŒçš„åŠ¨æ€å­—å…¸ï¼ˆDynamic Tableï¼‰ï¼Œå¯ä»¥åŠ¨æ€çš„æ·»åŠ å†…å®¹ï¼› æ”¯æŒåŸºäºŽé™æ€å“ˆå¤«æ›¼ç è¡¨çš„å“ˆå¤«æ›¼ç¼–ç ï¼ˆHuffman Codingï¼‰ï¼› é™æ€å­—å…¸çš„ä½œç”¨æœ‰ä¸¤ä¸ªï¼š å¯¹äºŽå®Œå…¨åŒ¹é…çš„å¤´éƒ¨é”®å€¼å¯¹ï¼Œä¾‹å¦‚ â€œ:method :GETâ€ï¼Œå¯ä»¥ç›´æŽ¥ä½¿ç”¨ä¸€ä¸ªå­—ç¬¦è¡¨ç¤ºï¼› å¯¹äºŽå¤´éƒ¨åç§°å¯ä»¥åŒ¹é…çš„é”®å€¼å¯¹ï¼Œä¾‹å¦‚ â€œcookie :xxxxxxxâ€ï¼Œå¯ä»¥å°†åç§°ä½¿ç”¨ä¸€ä¸ªå­—ç¬¦è¡¨ç¤ºã€‚ HTTP/2 ä¸­çš„é™æ€å­—å…¸å¦‚ä¸‹ï¼ˆä»¥ä¸‹åªæˆªå–äº†éƒ¨åˆ†ï¼Œå®Œæ•´è¡¨æ ¼åœ¨è¿™é‡Œï¼‰ï¼š åŒæ—¶ï¼Œæµè§ˆå™¨å’ŒæœåŠ¡ç«¯éƒ½å¯ä»¥å‘åŠ¨æ€å­—å…¸ä¸­æ·»åŠ é”®å€¼å¯¹ï¼Œä¹‹åŽè¿™ä¸ªé”®å€¼å¯¹å°±å¯ä»¥ä½¿ç”¨ä¸€ä¸ªå­—ç¬¦è¡¨ç¤ºäº†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒåŠ¨æ€å­—å…¸ä¸Šä¸‹æ–‡æœ‰å…³ï¼Œéœ€è¦ä¸ºæ¯ä¸ª HTTP/2 è¿žæŽ¥ç»´æŠ¤ä¸åŒçš„å­—å…¸ã€‚åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­ä½¿ç”¨ï¼Œä½¿ç”¨å­—ç¬¦ä»£æ›¿é”®å€¼å¯¹å¤§å¤§å‡å°‘ä¼ è¾“çš„æ•°æ®é‡ã€‚ åŒºåˆ«å››ï¼šHTTP2æ”¯æŒæœåŠ¡å™¨æŽ¨é€ æ„æ€æ˜¯è¯´ï¼Œå½“æˆ‘ä»¬å¯¹æ”¯æŒHTTP2.0çš„web serverè¯·æ±‚æ•°æ®çš„æ—¶å€™ï¼ŒæœåŠ¡å™¨ä¼šé¡ºä¾¿æŠŠä¸€äº›å®¢æˆ·ç«¯éœ€è¦çš„èµ„æºä¸€èµ·æŽ¨é€åˆ°å®¢æˆ·ç«¯ï¼Œå…å¾—å®¢æˆ·ç«¯å†æ¬¡åˆ›å»ºè¿žæŽ¥å‘é€è¯·æ±‚åˆ°æœåŠ¡å™¨ç«¯èŽ·å–ã€‚è¿™ç§æ–¹å¼éžå¸¸åˆé€‚åŠ è½½é™æ€èµ„æºã€‚ æœåŠ¡å™¨ç«¯æŽ¨é€çš„è¿™äº›èµ„æºå…¶å®žå­˜åœ¨å®¢æˆ·ç«¯çš„æŸå¤„åœ°æ–¹ï¼Œå®¢æˆ·ç«¯ç›´æŽ¥ä»Žæœ¬åœ°åŠ è½½è¿™äº›èµ„æºå°±å¯ä»¥äº†ï¼Œä¸ç”¨èµ°ç½‘ç»œï¼Œé€Ÿåº¦è‡ªç„¶æ˜¯å¿«å¾ˆå¤šçš„ã€‚ æœåŠ¡ç«¯æŽ¨é€æ˜¯ä¸€ç§åœ¨å®¢æˆ·ç«¯è¯·æ±‚ä¹‹å‰å‘é€æ•°æ®çš„æœºåˆ¶ã€‚å½“ä»£ç½‘é¡µä½¿ç”¨äº†è®¸å¤šèµ„æºï¼šHTMLã€æ ·å¼è¡¨ã€è„šæœ¬ã€å›¾ç‰‡ç­‰ç­‰ã€‚åœ¨HTTP/1.xä¸­è¿™äº›èµ„æºæ¯ä¸€ä¸ªéƒ½å¿…é¡»æ˜Žç¡®åœ°è¯·æ±‚ã€‚è¿™å¯èƒ½æ˜¯ä¸€ä¸ªå¾ˆæ…¢çš„è¿‡ç¨‹ã€‚æµè§ˆå™¨ä»ŽèŽ·å–HTMLå¼€å§‹ï¼Œç„¶åŽåœ¨å®ƒè§£æžå’Œè¯„ä¼°é¡µé¢çš„æ—¶å€™ï¼Œå¢žé‡åœ°èŽ·å–æ›´å¤šçš„èµ„æºã€‚å› ä¸ºæœåŠ¡å™¨å¿…é¡»ç­‰å¾…æµè§ˆå™¨åšæ¯ä¸€ä¸ªè¯·æ±‚ï¼Œç½‘ç»œç»å¸¸æ˜¯ç©ºé—²çš„å’Œæœªå……åˆ†ä½¿ç”¨çš„ã€‚ ä¸ºäº†æ”¹å–„å»¶è¿Ÿï¼ŒHTTP/2å¼•å…¥äº†server pushï¼Œå®ƒå…è®¸æœåŠ¡ç«¯æŽ¨é€èµ„æºç»™æµè§ˆå™¨ï¼Œåœ¨æµè§ˆå™¨æ˜Žç¡®åœ°è¯·æ±‚ä¹‹å‰ã€‚ä¸€ä¸ªæœåŠ¡å™¨ç»å¸¸çŸ¥é“ä¸€ä¸ªé¡µé¢éœ€è¦å¾ˆå¤šé™„åŠ èµ„æºï¼Œåœ¨å®ƒå“åº”æµè§ˆå™¨ç¬¬ä¸€ä¸ªè¯·æ±‚çš„æ—¶å€™ï¼Œå¯ä»¥å¼€å§‹æŽ¨é€è¿™äº›èµ„æºã€‚è¿™å…è®¸æœåŠ¡ç«¯åŽ»å®Œå…¨å……åˆ†åœ°åˆ©ç”¨ä¸€ä¸ªå¯èƒ½ç©ºé—²çš„ç½‘ç»œï¼Œæ”¹å–„é¡µé¢åŠ è½½æ—¶é—´ã€‚ äº”ã€HTTP2.0ç‰¹æ€§è§£æž1. HTTP2.0çš„å¤šè·¯å¤ç”¨å’ŒHTTP1.Xä¸­çš„é•¿è¿žæŽ¥å¤ç”¨æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ HTTP/1.xï¼šä¸€æ¬¡è¯·æ±‚-å“åº”ï¼Œå»ºç«‹ä¸€ä¸ªè¿žæŽ¥ï¼Œç”¨å®Œå…³é—­ï¼›æ¯ä¸€ä¸ªè¯·æ±‚éƒ½è¦å»ºç«‹ä¸€ä¸ªè¿žæŽ¥ï¼› HTTP/1.1 Pipelingè§£å†³æ–¹å¼ä¸ºï¼Œè‹¥å¹²ä¸ªè¯·æ±‚æŽ’é˜Ÿä¸²è¡ŒåŒ–å•çº¿ç¨‹å¤„ç†ï¼ŒåŽé¢çš„è¯·æ±‚ç­‰å¾…å‰é¢è¯·æ±‚çš„è¿”å›žæ‰èƒ½èŽ·å¾—æ‰§è¡Œæœºä¼šï¼Œä¸€æ—¦æœ‰æŸè¯·æ±‚è¶…æ—¶ç­‰ï¼ŒåŽç»­è¯·æ±‚åªèƒ½è¢«é˜»å¡žï¼Œæ¯«æ— åŠžæ³•ï¼Œä¹Ÿå°±æ˜¯äººä»¬å¸¸è¯´çš„çº¿å¤´é˜»å¡žï¼› HTTP/2å¤šä¸ªè¯·æ±‚å¯åŒæ—¶åœ¨ä¸€ä¸ªè¿žæŽ¥ä¸Šå¹¶è¡Œæ‰§è¡Œã€‚æŸä¸ªè¯·æ±‚ä»»åŠ¡è€—æ—¶ä¸¥é‡ï¼Œä¸ä¼šå½±å“åˆ°å…¶å®ƒè¿žæŽ¥çš„æ­£å¸¸æ‰§è¡Œï¼›å…·ä½“å¦‚å›¾ï¼š 2. æœåŠ¡ç«¯æŽ¨é€(server push)åˆ°åº•æ˜¯ä»€ä¹ˆï¼ŸæœåŠ¡ç«¯æŽ¨é€èƒ½æŠŠå®¢æˆ·ç«¯æ‰€éœ€è¦çš„èµ„æºä¼´éšç€index.htmlä¸€èµ·å‘é€åˆ°å®¢æˆ·ç«¯ï¼ŒçœåŽ»äº†å®¢æˆ·ç«¯é‡å¤è¯·æ±‚çš„æ­¥éª¤ã€‚æ­£å› ä¸ºæ²¡æœ‰å‘èµ·è¯·æ±‚ï¼Œå»ºç«‹è¿žæŽ¥ç­‰æ“ä½œï¼Œæ‰€ä»¥é™æ€èµ„æºé€šè¿‡æœåŠ¡ç«¯æŽ¨é€çš„æ–¹å¼å¯ä»¥æžå¤§åœ°æå‡é€Ÿåº¦ã€‚å…·ä½“å¦‚ä¸‹ï¼š æ™®é€šçš„å®¢æˆ·ç«¯è¯·æ±‚è¿‡ç¨‹ï¼š æœåŠ¡ç«¯æŽ¨é€çš„è¿‡ç¨‹ï¼š ä½†æ˜¯ï¼ŒçŽ°é˜¶æ®µç”¨ server push æŽ¨é€é™æ€èµ„æºå¹¶ä¸æ˜¯ä¸€ä»¶æœ‰æ„ä¹‰çš„äº‹æƒ…ï¼ŒåŽŸå› åœ¨äºŽï¼š HTML æ–‡ä»¶é€šå¸¸ä¸å¤§ï¼Œè€Œä¸”æ ·å¼è¡¨ä¸€èˆ¬å¾ˆé å‰ï¼Œæµè§ˆå™¨å‘çŽ°è¿™ç±»é™æ€èµ„æºçš„æ—¶é—´å‡ ä¹Žå¯ä»¥å¿½ç•¥ä¸è®¡ HTTP/2 å·²ç»èƒ½å¤Ÿå¤ç”¨ TCP è¿žæŽ¥äº†ï¼Œè¯·æ±‚ä¸å†åƒä»¥å‰é‚£æ ·æ˜‚è´µï¼Œè¯·æ±‚çš„å®žé™…æ•°æ®å¾ˆå°ï¼Œå‘é€è¯·æ±‚çš„æ—¶é—´ä¹Ÿå‡ ä¹Žå¯ä»¥å¿½ç•¥ä¸è®¡ å›½å†…çš„ CDN æ™®éä¸æ”¯æŒ server pushï¼Œè¿™æ„å‘³ç€ï¼Œå¦‚æžœè¦æŽ¨é€é™æ€èµ„æºï¼Œå°±å¿…é¡»è€—è´¹è‡ªå·±æœåŠ¡å™¨çš„å¸¦å®½ï¼ŒåŒæ—¶ä¹Ÿäº«å—ä¸åˆ° CDN çš„å„ç§å¥½å¤„äº† é™æ€èµ„æºé€šå¸¸ä¼šè¢«ç¼“å­˜å¾ˆé•¿æ—¶é—´ï¼Œæå‰æŽ¨é€çš„è¯ï¼Œåœ¨å¤§å¤šæ•°æƒ…å†µä¸‹åè€Œä¼šæµªè´¹æµé‡ å› æ­¤ï¼ŒServer pushæŽ¨é€çš„èµ„æºå¹¶ä¸æ˜¯é™æ€èµ„æºï¼Œè€Œåº”è¯¥æ˜¯ APIã€‚å½“ç„¶ï¼ŒServer pushå¯¹è¦æŽ¨é€çš„èµ„æºæ˜¯æœ‰é™åˆ¶çš„ï¼šå…¶è¯·æ±‚å¿…é¡»æ˜¯å¯ç¼“å­˜çš„ã€å®‰å…¨çš„ï¼Œè€Œä¸”ä¸èƒ½å¸¦æœ‰è¯·æ±‚ä½“ã€‚æ¢å¥è¯è¯´ï¼ŒServer pushå¯ä»¥æŽ¨ GET å’Œ HEAD è¯·æ±‚çš„å“åº”ã€‚ 3. ä¸ºä»€ä¹ˆéœ€è¦å¤´éƒ¨åŽ‹ç¼©ï¼Ÿå‡å®šä¸€ä¸ªé¡µé¢æœ‰100ä¸ªèµ„æºéœ€è¦åŠ è½½ï¼ˆè¿™ä¸ªæ•°é‡å¯¹äºŽä»Šå¤©çš„Webè€Œè¨€è¿˜æ˜¯æŒºä¿å®ˆçš„ï¼‰, è€Œæ¯ä¸€æ¬¡è¯·æ±‚éƒ½æœ‰1kbçš„æ¶ˆæ¯å¤´ï¼ˆè¿™åŒæ ·ä¹Ÿå¹¶ä¸å°‘è§ï¼Œå› ä¸ºCookieå’Œå¼•ç”¨ç­‰ä¸œè¥¿çš„å­˜åœ¨ï¼‰, åˆ™è‡³å°‘éœ€è¦å¤šæ¶ˆè€—100kbæ¥èŽ·å–è¿™äº›æ¶ˆæ¯å¤´ã€‚HTTP2.0å¯ä»¥ç»´æŠ¤ä¸€ä¸ªå­—å…¸ï¼Œå·®é‡æ›´æ–°HTTPå¤´éƒ¨ï¼Œå¤§å¤§é™ä½Žå› å¤´éƒ¨ä¼ è¾“äº§ç”Ÿçš„æµé‡ã€‚å…·ä½“å‚è€ƒï¼šHTTP/2 å¤´éƒ¨åŽ‹ç¼©æŠ€æœ¯ä»‹ç» 4. HTTP2.0å¤šè·¯å¤ç”¨æœ‰å¤šå¥½ï¼ŸHTTP æ€§èƒ½ä¼˜åŒ–çš„å…³é”®å¹¶ä¸åœ¨äºŽé«˜å¸¦å®½ï¼Œè€Œæ˜¯ä½Žå»¶è¿Ÿã€‚TCP è¿žæŽ¥ä¼šéšç€æ—¶é—´è¿›è¡Œè‡ªæˆ‘ã€Œè°ƒè°ã€ï¼Œèµ·åˆä¼šé™åˆ¶è¿žæŽ¥çš„æœ€å¤§é€Ÿåº¦ï¼Œå¦‚æžœæ•°æ®æˆåŠŸä¼ è¾“ï¼Œä¼šéšç€æ—¶é—´çš„æŽ¨ç§»æé«˜ä¼ è¾“çš„é€Ÿåº¦ã€‚è¿™ç§è°ƒè°åˆ™è¢«ç§°ä¸º TCP æ…¢å¯åŠ¨ã€‚ç”±äºŽè¿™ç§åŽŸå› ï¼Œè®©åŽŸæœ¬å°±å…·æœ‰çªå‘æ€§å’ŒçŸ­æ—¶æ€§çš„ HTTP è¿žæŽ¥å˜çš„ååˆ†ä½Žæ•ˆã€‚HTTP/2 é€šè¿‡è®©æ‰€æœ‰æ•°æ®æµå…±ç”¨åŒä¸€ä¸ªè¿žæŽ¥ï¼Œå¯ä»¥æ›´æœ‰æ•ˆåœ°ä½¿ç”¨ TCP è¿žæŽ¥ï¼Œè®©é«˜å¸¦å®½ä¹Ÿèƒ½çœŸæ­£çš„æœåŠ¡äºŽ HTTP çš„æ€§èƒ½æå‡ã€‚ å…­ã€å‚è€ƒHTTP1.0å’ŒHTTP2.0çš„åŒºåˆ«]]></content>
      <categories>
        <category>network</category>
      </categories>
      <tags>
        <tag>http</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[å®è§‚è§†è§’çœ‹Golangä¸­Mapçš„å†…éƒ¨å®žçŽ°]]></title>
    <url>%2Farticles%2F%E5%AE%8F%E8%A7%82%E8%A7%86%E8%A7%92%E7%9C%8BGolang%E4%B8%AD%E7%9A%84Map%E5%86%85%E9%83%A8%E5%AE%9E%E7%8E%B0%2F</url>
    <content type="text"><![CDATA[ä»‹ç»ç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šå…³äºŽsliceså†…éƒ¨å®žçŽ°çš„æ–‡ç« ã€‚ä½†æ˜¯æ¯æ¬¡ä¸€è¯´åˆ°mapï¼Œæˆ‘ä»¬å¥½åƒå°±ä¸€è„¸æ‡µå“”äº†ã€‚æˆ‘æƒ³çŸ¥é“ä¸ºä»€ä¹ˆï¼Œç„¶åŽæˆ‘å°±åŽ»ç¿»çœ‹äº†mapçš„æºç ï¼Œæœ€ç»ˆä¸€åˆ‡éƒ½çœŸç›¸å¤§ç™½äº†ã€‚orzâ€¦. è‡³å°‘å¯¹æˆ‘æ¥è¯´ï¼Œè¿™äº›æºç æ˜¯æœ‰ç‚¹å¤æ‚çš„ã€‚è¯è™½å¦‚æ­¤ï¼Œæˆ‘è®¤ä¸ºæˆ‘ä»¬è¿˜æ˜¯å¯ä»¥ä»Žä¸€ä¸ªå®è§‚çš„è§†è§’æ¥çœ‹çœ‹mapåˆ°åº•æ˜¯å¦‚ä½•æž„å»ºå’Œæ‰©å®¹çš„ã€‚å¹¶ä¸”è¿™è‡³å°‘è¦èƒ½å¤Ÿè§£é‡Šmapä¸ºä»€ä¹ˆæ˜¯æ— åºçš„ã€é«˜æ•ˆçš„ã€å¿«é€Ÿçš„ã€‚ åˆ›å»ºå’Œä½¿ç”¨mapé¦–å…ˆè®©æˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œå¦‚ä½•åˆ›å»ºä¸€ä¸ªmapå¹¶åœ¨å…¶ä¸­å­˜å‚¨ä¸€äº›å€¼ï¼š 1234567// Create an empty map with a key and value of type stringcolors := map[string]string&#123;&#125;// Add a few keys/value pairs to the mapcolors["AliceBlue"] = "#F0F8FF"colors["Coral"] = "#FF7F50"colors["DarkGray"] = "#A9A9A9" å½“æˆ‘ä»¬æƒ³å‘mapæ·»åŠ ä¸€äº›å€¼æ—¶ï¼Œæˆ‘ä»¬æ€»æ˜¯ä¼šç»™æ¯ä¸ªå€¼æŒ‡å®šä¸€ä¸ªkeyã€‚æ¯ä¸ªkeyæ˜¯ä¸ºäº†è®©æˆ‘ä»¬åŽç»­å¯ä»¥åœ¨ä¸éåŽ†æ•´ä¸ªé›†åˆçš„å‰æä¸‹å¿«é€Ÿçš„æŸ¥åˆ°å¯¹åº”çš„å€¼ã€‚ 1fmt.Printf("Value: %s", colors["Coral"]) å¦‚æžœæˆ‘ä»¬éåŽ†æ•´ä¸ªmapï¼Œæˆ‘ä»¬å–åˆ°çš„å€¼çš„é¡ºåºä¸ä¸€å®šä¼šå’Œæˆ‘ä»¬å½“åˆå­˜è¿›åŽ»çš„é¡ºåºä¸€è‡´ã€‚äº‹å®žä¸Šï¼Œæ¯æ¬¡æ‰§è¡Œä»¥ä¸‹ä»£ç ï¼Œæ‰€å¾—åˆ°çš„é¡ºåºéƒ½ä¼šä¸ä¸€æ ·ï¼š 12345678910111213141516171819colors := map[string]string&#123;&#125;colors["AliceBlue"] = "#F0F8FF"colors["Coral"] = "#FF7F50"colors["DarkGray"] = "#A9A9A9"colors["ForestGreen"] = "#228B22"colors["Indigo"] = "#4B0082"colors["Lime"] = "#00FF00"colors["Navy"] = "#000080"colors["Orchid"] = "#DA70D6"colors["Salmon"] = "#FA8072"for key, value := range colors &#123; fmt.Printf("%s:%s, ", key, value)&#125;//Output://AliceBlue:#F0F8FF, DarkGray:#A9A9A9, Indigo:#4B0082, Coral:#FF7F50,//ForestGreen:#228B22, Lime:#00FF00, Navy:#000080, Orchid:#DA70D6,//Salmon:#FA8072 çŽ°åœ¨ï¼Œæˆ‘ä»¬å·²ç»å­¦ä¼šå¦‚ä½•åˆ›å»ºä¸€ä¸ªmapï¼Œå¹¶å¯¹å…¶è¿›è¡Œè®¾ç½®å’ŒéåŽ†äº†ã€‚æŽ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬æ­å¼€è¿™ä¸€åˆ‡çš„é¢çº±ã€‚ï¼šï¼‰ mapçš„å†…éƒ¨ç»“æž„Goä¸­çš„mapæ˜¯é€šè¿‡hash tableå®žçŽ°çš„ã€‚å¦‚æžœä½ è¿˜ä¸çŸ¥é“hash tableæ˜¯ä»€ä¹ˆï¼Œç½‘ä¸Šå·²ç»æœ‰å¾ˆå¤šç›¸å…³çš„æ–‡ç« äº†ã€‚æˆ–è®¸ä½ å¯ä»¥ä»ŽWikiå¼€å§‹ã€‚ Go mapçš„hash tableæ˜¯ä¸€ä¸ªæ¡¶æ•°ç»„ã€‚æ¡¶çš„æ•°é‡æ€»æ˜¯è®¾ç½®æˆ2çš„ä¹˜æ–¹ã€‚å½“ä½ æ‰§è¡Œä¸€ä¸ªmapæ“ä½œçš„æ—¶å€™ï¼Œæ¯”å¦‚ï¼ˆcolors[â€œBlackâ€] = â€œ#000000â€ï¼‰,ä¸€ä¸ªæŒ‡å‘ç›¸åº”å€¼çš„hash keyå°±ä¼šç”Ÿæˆã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå­—ç¬¦ä¸²â€Blackâ€å°±æ˜¯ç”¨æ¥ç”Ÿæˆhash keyçš„ã€‚æ‰€ç”Ÿæˆçš„hash keyçš„ä½Žä½å­—èŠ‚ç”¨æ¥å®šä½åˆ°å“ªä¸€ä¸ªæ¡¶ã€‚ æ¡¶å®šä½å¥½äº†ä¹‹åŽï¼Œå°±å¯ä»¥å­˜å‚¨ã€ç§»é™¤ã€æŸ¥æ‰¾é”®å€¼å¯¹äº†ã€‚å¦‚æžœæˆ‘ä»¬è¿›ä¸€æ­¥çœ‹çœ‹æ¡¶çš„å†…éƒ¨å®žçŽ°ï¼Œå°±ä¼šå‘çŽ°å®ƒæ˜¯ç”±ä¸¤éƒ¨åˆ†ç»„æˆçš„ã€‚å…¶ä¸€ï¼Œåœ¨è¿™ä¸ªhash keyä¸­æœ‰ä¸€ä¸ªä½æ•°ç»„ï¼Œå®ƒçš„é«˜å…«ä½ç”¨æ¥å®šä½åˆ°æ¡¶ã€‚è¿™ä¸ªæ•°ç»„ä¿è¯äº†å­˜å‚¨åœ¨å„è‡ªæ¡¶ä¸­çš„é”®å€¼å¯¹ä¸ä¼šé‡å¤ã€‚å…¶äºŒï¼Œæœ‰ä¸€ä¸ªå­—èŠ‚æ•°ç»„ï¼Œå…¶ä¸­å­˜å‚¨äº†æ‰€æœ‰çš„é”®å€¼å¯¹ã€‚è¿™ä¸ªæ•°ç»„è®²æ‰€æœ‰çš„é”®ï¼Œæ‰€æœ‰çš„å€¼åˆ†åˆ«æ‰“åŒ…å­˜æ”¾åœ¨å„è‡ªçš„æ¡¶ä¸­ã€‚ å½“æˆ‘ä»¬éåŽ†ä¸€ä¸ªmapçš„æ—¶å€™ï¼Œè¿­ä»£å™¨ä¾æ¬¡è®¿é—®æ‰€æœ‰çš„æ¡¶ï¼Œç„¶åŽæŒ‰ç…§å®ƒä»¬åœ¨å­—èŠ‚æ•°ç»„ä¸­çš„é¡ºåºä¾æ¬¡è¿”å›žé”®å€¼å¯¹ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆmapçš„è¾“å‡ºæ˜¯æ— åºé›†åˆã€‚hash keyså†³å®šäº†mapçš„éåŽ†é¡ºåºï¼Œå› ä¸ºå®ƒä»¬å†³å®šäº†æ¯ä¸ªé”®å€¼å¯¹æœ€ç»ˆä¼šè¿›å…¥å“ªä¸ªæ¡¶ã€‚ å†…å­˜å’Œæ¡¶æº¢å‡ºé”®å€¼å¯¹ä¹‹æ‰€ä»¥è¦è¿™æ ·æ‰“åŒ…å­˜æ”¾åœ¨ä¸€ä¸ªå­—èŠ‚æ•°ç»„ä¸­ï¼Œæœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„åŽŸå› ã€‚é‚£å°±æ˜¯ï¼Œå‡å¦‚æ‰€æœ‰çš„é”®ã€å€¼éƒ½æŒ‰ç…§key/value/key/valueçš„æ–¹å¼å­˜å‚¨ï¼Œåœ¨æ¯ä¸ªé”®å€¼å¯¹ä¹‹é—´å°±éœ€è¦åŽ»é¢å¤–å¡«å……é€‚å½“çš„ç©ºé—´ï¼Œæ‰èƒ½å¤Ÿä¿æŒå†…å­˜è¾¹ç•Œå¯¹é½ã€‚ä¸¾ä¸ªðŸŒ°ï¼Œæˆ‘ä»¬ç”³æ˜Žå¦‚ä¸‹è¿™æ ·çš„ä¸€ä¸ªmapï¼š 1map[int64]int8 è¿™ä¸ªmapçš„æ¯ä¸€ä¸ªé”®å€¼å¯¹ä¸­ï¼Œä¸€ä¸ªå­—èŠ‚å¤§å°çš„å€¼éƒ½ä¼šå¯¼è‡´7ä¸ªå­—èŠ‚çš„é¢å¤–å¡«å……ã€‚è€Œé€šè¿‡å°†é”®å€¼å¯¹ä»¥key/key/value/valueçš„æ–¹å¼å­˜å‚¨ï¼Œå”¯ä¸€å¯èƒ½éœ€è¦é¢å¤–å¡«å……çš„åœ°æ–¹å°±æ˜¯åœ¨å­—èŠ‚æ•°ç»„çš„æœ€åŽï¼Œè€Œä¸æ˜¯ä¹‹é—´ã€‚æ¶ˆé™¤è¿™äº›ä¸å¿…è¦çš„å¡«å……å­—èŠ‚ï¼Œå¸®åŠ©æ¡¶å’Œmapçœäº†å¾ˆå¤šçš„å†…å­˜å¼€é”€ã€‚æƒ³è¦å­¦ä¹ æ›´å¤šè¾¹ç•Œå¯¹é½ç›¸å…³çš„çŸ¥è¯†ï¼Œå¯ä»¥è¯»è¯»è¿™ç¯‡æ–‡ç« ã€‚ æ¯ä¸ªæ¡¶é…ç½®æˆäº†åªèƒ½å­˜å‚¨8ä¸ªé”®å€¼å¯¹ã€‚å¦‚æžœæœ‰ç¬¬ä¹ä¸ªé”®å€¼å¯¹éœ€è¦åŠ å…¥åˆ°è¿™ä¸ªå·²ç»æ»¡äº†çš„æ¡¶ä¸­æ—¶ï¼Œä¸€ä¸ªæ–°çš„æ¡¶å°±ä¼šè¢«åˆ›å»ºï¼Œå¹¶è¢«å„è‡ªçš„æ¡¶æ‰€å¼•ç”¨ã€‚ mapæ‰©å®¹å½“æˆ‘ä»¬æŒç»­çš„å¯¹ä¸€ä¸ªmapæ·»åŠ /åˆ é™¤é”®å€¼å¯¹æ—¶ï¼Œmapçš„æ€§èƒ½ä¼šå¼€å§‹ä¸‹é™ã€‚å†³å®šäº†ä¸€ä¸ªmapä½•æ—¶è§¦å‘æ‰©å®¹çš„è´Ÿè½½é˜ˆå€¼æ˜¯ç”±ä»¥ä¸‹å››ä¸ªå› å­å†³å®šçš„ï¼š 1234overflow : Percentage of buckets which have an overflow bucketbytes/entry : Number of overhead bytes used per key/value pairhitprobe : Number of entries that need to be checked when looking up a keymissprobe : Number of entries that need to be checked when looking up an absent key ç›®å‰ï¼Œæºç ä¸­ç”¨çš„å…·ä½“çš„è´Ÿè½½é˜ˆå€¼å¦‚ä¸‹ï¼š LOAD %overflow bytes/entry hitprobe missprobe 6.50 20.90 10.79 4.25 6.50 å‘ç”Ÿæ‰©å®¹æ—¶ï¼Œé¦–å…ˆç”³è¯·ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘æ—§æ¡¶çš„åœ°å€ã€‚ç„¶åŽåˆ†é…ä¸€ä¸ªäºŒå€äºŽåŽŸæ¥æ¡¶æ•°é‡çš„æ¡¶æ•°ç»„ã€‚è¿™ä¼šå¯¼è‡´å‡ºçŽ°å¤§é‡çš„å†…å­˜åˆ†é…ï¼Œä½†æ˜¯å› ä¸ºè¿™äº›ç”³è¯·çš„å†…å­˜å¹¶æ²¡æœ‰åˆå§‹åŒ–ï¼Œæ‰€ä»¥è¿™äº›åˆ†é…æ—¶å¾ˆå¿«çš„ã€‚ ä¸€æ—¦æ–°çš„æ¡¶æ•°ç»„çš„å†…å­˜å¯ç”¨äº†ï¼Œæ—§çš„æ¡¶æ•°ç»„ä¸­çš„æ‰€æœ‰é”®å€¼å¯¹å°±å¯ä»¥æ¬åˆ°æ–°çš„æ¡¶æ•°ç»„ä¸­åŽ»äº†ã€‚æ¯æ¬¡æ¬è¿å‘ç”Ÿåœ¨mapæ–°å¢ž/ç§»é™¤é”®å€¼å¯¹çš„æ—¶å€™ã€‚åœ¨æ—§æ¡¶æ•°ç»„ä¸­çš„åŒä¸€ä¸ªæ¡¶çš„é”®å€¼å¯¹å¯èƒ½è¢«æ¬è¿åˆ°æ–°æ¡¶æ•°ç»„çš„ä¸åŒçš„æ¡¶ä¸­åŽ»ã€‚æ¬è¿ç®—æ³•è¯•å›¾è®©é”®å€¼å¯¹å‡åŒ€çš„åˆ†å¸ƒåœ¨æ–°çš„æ¡¶æ•°ç»„ä¸­ã€‚ è¿™æ˜¯ä¸€ä¸ªéžå¸¸ç²¾å·§çš„è®¾è®¡ï¼Œå› ä¸ºè¿­ä»£å™¨ä»ç„¶éœ€è¦åŽ»éåŽ†æ—§çš„æ¡¶ï¼Œç›´åˆ°æ—§çš„æ¡¶å…¨éƒ¨æ¬è¿å®Œæ¯•ã€‚åœ¨è¿­ä»£æ“ä½œçš„è¿‡ç¨‹ä¸­ï¼Œé”®å€¼å¯¹çš„è¿”å›žæ–¹å¼ä¹Ÿå—åˆ°äº†è¿™ä¸€è®¾è®¡çš„å½±å“ã€‚é‡‡ç”¨äº†å¾ˆå¤šæ–¹æ¡ˆæ¥ç¡®ä¿åœ¨mapæ‰©å®¹çš„è¿‡ç¨‹ä¸­è¿­ä»£å™¨èƒ½æ­£å¸¸å·¥ä½œã€‚ æ€»ç»“æ­£å¦‚å¼€å¤´æ‰€è¯´çš„ï¼Œè¿™ç¯‡æ–‡ç« åªæ˜¯åœ¨ä¸€ä¸ªå®è§‚çš„è§†è§’ä¸‹çœ‹mapçš„å†…éƒ¨ç»“æž„å’Œå®ƒæ˜¯å¦‚ä½•æ‰©å®¹çš„ã€‚æºç æ˜¯ç”¨cå†™çš„ï¼Œä½¿ç”¨äº†å¾ˆå¤šçš„å†…å­˜å’ŒæŒ‡é’ˆæ“ä½œæ¥ä¿è¯æ•ˆçŽ‡å’Œå¯é ã€‚ å½“ç„¶äº†ï¼ŒçŽ°åœ¨çš„å®žçŽ°æ–¹å¼åœ¨æœªæ¥çš„ä»»ä½•ä¸€ä¸ªæ—¶é—´éƒ½å¯èƒ½ä¼šå‘ç”Ÿæ”¹å˜ã€‚ä½†æ˜¯è¿™å¹¶ä¸å½±å“æˆ‘ä»¬æ­£ç¡®ä½¿ç”¨mapçš„èƒ½åŠ›ã€‚è¿™ä¸ªè§†è§’è®©æˆ‘ä»¬æ˜Žç™½äº†ï¼Œå½“æˆ‘ä»¬æå‰çŸ¥é“ä¼šæœ‰å¤šå°‘keyéœ€è¦å­˜å‚¨æ—¶ï¼Œæœ€å¥½åœ¨åˆå§‹åŒ–çš„æ—¶å€™å°±æŠŠç›¸åº”å¤§å°çš„å†…å­˜åˆ†é…å¥½ã€‚åŒæ—¶ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆmapæ˜¯ä¸€ä¸ªæ— åºçš„é›†åˆï¼Œå’Œä¸ºä»€ä¹ˆåœ¨éåŽ†mapçš„æ—¶å€™ï¼Œè¿­ä»£å™¨çš„è¡Œä¸ºçœ‹èµ·æ¥åƒæ˜¯éšæœºçš„ã€‚ æ­¤æ–‡ä¸ºè¯‘æ–‡ï¼ŒåŽŸæ–‡åœ°å€ã€‚]]></content>
      <categories>
        <category>golang</category>
      </categories>
      <tags>
        <tag>golang</tag>
        <tag>map</tag>
        <tag>internals</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Golangä¸­sliceçš„ä½¿ç”¨æŠ€å·§]]></title>
    <url>%2Farticles%2FGolang%E4%B8%ADslice%E7%9A%84%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7%2F</url>
    <content type="text"><![CDATA[ç”±äºŽå¼•å…¥äº†å†…å»ºçš„appendæ–¹æ³•ï¼Œcontainer/vectoråŒ…çš„å¾ˆå¤šæ–¹æ³•åœ¨Go 1ä¸­è¢«ç§»é™¤äº†ï¼Œå› ä¸ºæˆ‘ä»¬è®¤ä¸ºå¯ä»¥é€šè¿‡ä½¿ç”¨appendå’Œcopyæ¥ä»£æ›¿å®ƒä»¬ã€‚ ä¸‹é¢å°±æ˜¯container/vectoråŒ…ä¸­çš„æ–¹æ³•ï¼Œæˆ‘ä»¬é€šè¿‡sliceæ¥æ¨¡æ‹Ÿå®žçŽ°ã€‚ å¸¸è§„æ“ä½œAppend Vector1a = append(a, b...) Copy123456b = make([]T, len(a))copy(b, a)// orb = append([]T(nil), a...)// orb = append(a[:0:0], a...) // æŸ¥çœ‹ https://github.com/go101/go101/wiki Cut1a = append(a[:i], a[j:]...) Delete123a = append(a[:i], a[i+1:]...)// ora = a[:i+copy(a[i:], a[i+1:])] Delete without preserving order12a[i] = a[len(a)-1] a = a[:len(a)-1] æ³¨æ„: å¦‚æžœè¯¥å…ƒç´ ç±»åž‹æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªåŒ…å«éœ€è¦è¢«å›žæ”¶çš„æŒ‡é’ˆç±»åž‹å­—æ®µçš„structï¼Œä¸Šé¢çš„cutã€deleteå®žçŽ°å¯èƒ½ä¼šæœ‰æ½œåœ¨çš„å†…å­˜æ³„æ¼çš„é—®é¢˜ã€‚ä¸€äº›å…ƒç´ çš„å€¼å¯èƒ½ä¼šè¢«aä¸€ç›´å¼•ç”¨è€Œä¸è¢«é‡Šæ”¾ï¼Œä¸‹é¢çš„ä»£ç å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ 12345678910111213141516// Cutcopy(a[i:], a[j:])for k, n := len(a)-j+i, len(a); k &lt; n; k++ &#123; a[k] = nil // æˆ–è€…ç±»åž‹Tçš„å¯¹åº”é›¶å€¼&#125;a = a[:len(a)-j+i]// Deletecopy(a[i:], a[i+1:])a[len(a)-1] = nil // æˆ–è€…ç±»åž‹Tçš„å¯¹åº”é›¶å€¼a = a[:len(a)-1]// ä¸ä¿è¯åŽŸæ¥é¡ºåºçš„Deletea[i] = a[len(a)-1]a[len(a)-1] = nila = a[:len(a)-1] Expand1a = append(a[:i], append(make([]T, j), a[i:]...)...) Extend1a = append(a, make([]T, j)...) Insert1a = append(a[:i], append([]T&#123;x&#125;, a[i:]...)...) æ³¨æ„: ç¬¬äºŒä¸ªappendï¼ˆæŒ‡çš„ðŸ‘†ä»£ç å—çš„ä¸­append([]T{x}, a[i:]...)ï¼‰ä¼šåˆ©ç”¨åŽŸæ¥sliceåº•å±‚çš„æ•°ç»„åˆ›å»ºä¸€ä¸ªæ–°çš„sliceï¼Œç„¶åŽå°†a[i:]ä¸­çš„å…ƒç´ copyåˆ°è¿™ä¸ªæ–°çš„sliceï¼Œæœ€åŽå†æŠŠè¿™ä¸ªæ–°çš„sliceå¤åˆ¶å›žåŽŸæ¥çš„aã€‚ æ–°çš„sliceçš„åˆ›å»ºï¼ˆéšä¹‹å¸¦æ¥äº†å¤šä½™çš„å†…å­˜å›žæ”¶åŽ‹åŠ›ï¼‰å’Œcopyå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼æ¥é¿å…ï¼š 1234// Inserts = append(s, 0)copy(s[i+1:], s[i:])s[i] = x InsertVector1a = append(a[:i], append(b, a[i:]...)...) Pop/Shift1x, a = a[0], a[1:] Pop Back1x, a = a[len(a)-1], a[:len(a)-1] Push1a = append(a, x) Push Front/Unshift1a = append([]T&#123;x&#125;, a...) ä¸€äº›å¥‡æŠ€æ·«å·§ï¼ˆå‰æ–¹é«˜èƒ½â€¦â€¦orzï¼‰æ— é¢å¤–å¯¹è±¡åˆ†é…çš„filterè¿™ä¸ªæŠ€å·§åˆ©ç”¨äº†sliceä¼šå…±äº«å®ƒåº•å±‚æ•°æ®å­˜å‚¨å’Œå®¹é‡çš„ç‰¹æ€§ï¼Œé€šè¿‡é‡ç”¨åº•å±‚å­˜å‚¨æ¥è¿‡æ»¤sliceã€‚å½“ç„¶äº†ï¼ŒåŽŸsliceçš„å†…å®¹ä¹Ÿä¼šç›¸åº”å‘ç”Ÿæ”¹å˜ã€‚ 123456b := a[:0]for _, x := range a &#123; if f(x) &#123; b = append(b, x) &#125;&#125; åè½¬å°†sliceä¸­çš„å…ƒç´ åè½¬ã€‚ 1234for i := len(a)/2-1; i &gt;= 0; i-- &#123; opp := len(a)-1-i a[i], a[opp] = a[opp], a[i]&#125; ä¸‹é¢çš„ä»£ç ç±»ä¼¼ï¼Œåªä¸è¿‡ä½¿ç”¨äº†ä¸¤ä¸ªæ¸¸æ ‡ã€‚ 123for left, right := 0, len(a)-1; left &lt; right; left, right = left+1, right-1 &#123; a[left], a[right] = a[right], a[left]&#125; æ´—ç‰ŒFisherâ€“Yatesç®—æ³•ã€‚ ä»Žgo1.10å¼€å§‹ï¼Œå·²ç»åœ¨åŒ…math/rand.Shuffleä¸­åŽŸç”Ÿæ”¯æŒäº†ã€‚ 1234for i := len(a) - 1; i &gt; 0; i-- &#123; j := rand.Intn(i + 1) a[i], a[j] = a[j], a[i]&#125; æœ€å°åŒ–å†…å­˜ä½¿ç”¨çš„æ‰¹é‡å¤„ç†æ–¹æ³•å¦‚æžœä½ æƒ³åˆ†æ‰¹å¤„ç†ä¸€ä¸ªå¾ˆå¤§çš„sliceï¼Œè¿™ä¸ªæŠ€å·§ä¼šå¾ˆæœ‰ç”¨ï¼ 1234567891011actions := []int&#123;0, 1, 2, 3, 4, 5, 6, 7, 8, 9&#125;batchSize := 3var batches [][]intfor batchSize &lt; len(actions) &#123; actions, batches = actions[batchSize:], append(batches, actions[0:batchSize:batchSize])&#125;batches = append(batches, actions)fmt.Println(result)// [[0 1 2] [3 4 5] [6 7 8] [9]] in-place åŽ»é‡æ³•123456789101112131415import "sort"in := []int&#123;3,2,1,4,3,2,1,4,1&#125; // ä»»ä½•å®žçŽ°äº†sortæŽ¥å£çš„ç±»åž‹éƒ½å¯ä»¥sort.Ints(in)j := 0for i := 1; i &lt; len(in); i++ &#123; if in[j] == in[i] &#123; continue &#125; j++ in[i], in[j] = in[j], in[i]&#125;result := in[:j+1]fmt.Println(result) // [1 2 3 4] æ³¨ï¼šæœ¬æ–‡æºè‡ªGolangå®˜æ–¹Wikiæ–‡ç« ï¼Œä¸”åœ¨ä¸å®šæœŸæ›´æ–°ï¼Œæœ¬äººä¹Ÿä¼šæŒç»­è·Ÿè¿›ï½ž]]></content>
      <categories>
        <category>golang</category>
      </categories>
      <tags>
        <tag>golang</tag>
        <tag>slice</tag>
        <tag>tricks</tag>
      </tags>
  </entry>
</search>
