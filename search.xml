<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[Golangä¸­sliceçš„ä½¿ç”¨æŠ€å·§]]></title>
    <url>%2Farticles%2FGolang%E4%B8%ADslice%E7%9A%84%E4%BD%BF%E7%94%A8%E6%8A%80%E5%B7%A7%2F</url>
    <content type="text"><![CDATA[ç”±äºŽå¼•å…¥äº†å†…å»ºçš„appendæ–¹æ³•ï¼Œcontainer/vectoråŒ…çš„å¾ˆå¤šæ–¹æ³•åœ¨Go 1ä¸­è¢«ç§»é™¤äº†ï¼Œå› ä¸ºæˆ‘ä»¬è®¤ä¸ºå¯ä»¥é€šè¿‡ä½¿ç”¨appendå’Œcopyæ¥ä»£æ›¿å®ƒä»¬ã€‚ ä¸‹é¢å°±æ˜¯container/vectoråŒ…ä¸­çš„æ–¹æ³•ï¼Œæˆ‘ä»¬é€šè¿‡sliceæ¥æ¨¡æ‹Ÿå®žçŽ°ã€‚ å¸¸è§„æ“ä½œ1. Append Vector1a = append(a, b...) 2. Copy123456b = make([]T, len(a))copy(b, a)// orb = append([]T(nil), a...)// orb = append(a[:0:0], a...) // æŸ¥çœ‹ https://github.com/go101/go101/wiki 3. Cut1a = append(a[:i], a[j:]...) 4. Delete123a = append(a[:i], a[i+1:]...)// ora = a[:i+copy(a[i:], a[i+1:])] 5. Delete without preserving order12a[i] = a[len(a)-1] a = a[:len(a)-1] æ³¨æ„: å¦‚æžœè¯¥å…ƒç´ ç±»åž‹æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªåŒ…å«éœ€è¦è¢«å›žæ”¶çš„æŒ‡é’ˆç±»åž‹å­—æ®µçš„structï¼Œä¸Šé¢çš„cutã€deleteå®žçŽ°å¯èƒ½ä¼šæœ‰æ½œåœ¨çš„å†…å­˜æ³„æ¼çš„é—®é¢˜ã€‚ä¸€äº›å…ƒç´ çš„å€¼å¯èƒ½ä¼šè¢«aä¸€ç›´å¼•ç”¨è€Œä¸è¢«é‡Šæ”¾ï¼Œä¸‹é¢çš„ä»£ç å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ 12345678910111213141516// Cutcopy(a[i:], a[j:])for k, n := len(a)-j+i, len(a); k &lt; n; k++ &#123; a[k] = nil // æˆ–è€…ç±»åž‹Tçš„å¯¹åº”é›¶å€¼&#125;a = a[:len(a)-j+i]// Deletecopy(a[i:], a[i+1:])a[len(a)-1] = nil // æˆ–è€…ç±»åž‹Tçš„å¯¹åº”é›¶å€¼a = a[:len(a)-1]// ä¸ä¿è¯åŽŸæ¥é¡ºåºçš„Deletea[i] = a[len(a)-1]a[len(a)-1] = nila = a[:len(a)-1] 6. Expand1a = append(a[:i], append(make([]T, j), a[i:]...)...) 7. Extend1a = append(a, make([]T, j)...) 8. Insert1a = append(a[:i], append([]T&#123;x&#125;, a[i:]...)...) æ³¨æ„: ç¬¬äºŒä¸ªappendï¼ˆæŒ‡çš„ðŸ‘†ä»£ç å—çš„ä¸­append([]T{x}, a[i:]...)ï¼‰ä¼šåˆ©ç”¨åŽŸæ¥sliceåº•å±‚çš„æ•°ç»„åˆ›å»ºä¸€ä¸ªæ–°çš„sliceï¼Œç„¶åŽå°†a[i:]ä¸­çš„å…ƒç´ copyåˆ°è¿™ä¸ªæ–°çš„sliceï¼Œæœ€åŽå†æŠŠè¿™ä¸ªæ–°çš„sliceå¤åˆ¶å›žåŽŸæ¥çš„aã€‚ æ–°çš„sliceçš„åˆ›å»ºï¼ˆéšä¹‹å¸¦æ¥äº†å¤šä½™çš„å†…å­˜å›žæ”¶åŽ‹åŠ›ï¼‰å’Œcopyå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æ–¹å¼æ¥é¿å…ï¼š 1234// Inserts = append(s, 0)copy(s[i+1:], s[i:])s[i] = x 9. InsertVector1a = append(a[:i], append(b, a[i:]...)...) 10. Pop/Shift1x, a = a[0], a[1:] 11. Pop Back1x, a = a[len(a)-1], a[:len(a)-1] 12. Push1a = append(a, x) 13. Push Front/Unshift1a = append([]T&#123;x&#125;, a...) ä¸€äº›å¥‡æŠ€æ·«å·§ï¼ˆå‰æ–¹é«˜èƒ½â€¦â€¦orzï¼‰1. æ— é¢å¤–å¯¹è±¡åˆ†é…çš„filterè¿™ä¸ªæŠ€å·§åˆ©ç”¨äº†sliceä¼šå…±äº«å®ƒåº•å±‚æ•°æ®å­˜å‚¨å’Œå®¹é‡çš„ç‰¹æ€§ï¼Œé€šè¿‡é‡ç”¨åº•å±‚å­˜å‚¨æ¥è¿‡æ»¤sliceã€‚å½“ç„¶äº†ï¼ŒåŽŸsliceçš„å†…å®¹ä¹Ÿä¼šç›¸åº”å‘ç”Ÿæ”¹å˜ã€‚ 123456b := a[:0]for _, x := range a &#123; if f(x) &#123; b = append(b, x) &#125;&#125; 2. åè½¬å°†sliceä¸­çš„å…ƒç´ åè½¬ã€‚ 1234for i := len(a)/2-1; i &gt;= 0; i-- &#123; opp := len(a)-1-i a[i], a[opp] = a[opp], a[i]&#125; ä¸‹é¢çš„ä»£ç ç±»ä¼¼ï¼Œåªä¸è¿‡ä½¿ç”¨äº†ä¸¤ä¸ªæ¸¸æ ‡ã€‚ 123for left, right := 0, len(a)-1; left &lt; right; left, right = left+1, right-1 &#123; a[left], a[right] = a[right], a[left]&#125; 3. æ´—ç‰ŒFisherâ€“Yatesç®—æ³•ã€‚ ä»Žgo1.10å¼€å§‹ï¼Œå·²ç»åœ¨åŒ…math/rand.Shuffleä¸­åŽŸç”Ÿæ”¯æŒäº†ã€‚ 1234for i := len(a) - 1; i &gt; 0; i-- &#123; j := rand.Intn(i + 1) a[i], a[j] = a[j], a[i]&#125; 4. æœ€å°åŒ–å†…å­˜ä½¿ç”¨çš„æ‰¹é‡å¤„ç†æ–¹æ³•å¦‚æžœä½ æƒ³åˆ†æ‰¹å¤„ç†ä¸€ä¸ªå¾ˆå¤§çš„sliceï¼Œè¿™ä¸ªæŠ€å·§ä¼šå¾ˆæœ‰ç”¨ï¼ 1234567891011actions := []int&#123;0, 1, 2, 3, 4, 5, 6, 7, 8, 9&#125;batchSize := 3var batches [][]intfor batchSize &lt; len(actions) &#123; actions, batches = actions[batchSize:], append(batches, actions[0:batchSize:batchSize])&#125;batches = append(batches, actions)// è¾“å‡º// [[0 1 2] [3 4 5] [6 7 8] [9]] 5. in-place åˆ é™¤æ³•1234567891011121314import "sort"in := []int&#123;3,2,1,4,3,2,1,4,1&#125; // ä»»ä½•å®žçŽ°äº†sortæŽ¥å£çš„ç±»åž‹éƒ½å¯ä»¥sort.Ints(in)j := 0for i := 1; i &lt; len(in); i++ &#123; if in[j] == in[i] &#123; continue &#125; j++ in[i], in[j] = in[j], in[i]&#125;result := in[:j+1]fmt.Println(result) // [1 2 3 4] æ³¨ï¼šæœ¬æ–‡æ˜¯Golangå®˜æ–¹Wikiæ–‡ç« çš„ç¿»è¯‘ï¼Œé“¾æŽ¥]]></content>
      <categories>
        <category>golang</category>
      </categories>
      <tags>
        <tag>golang</tag>
        <tag>slice</tag>
        <tag>tricks</tag>
      </tags>
  </entry>
</search>
